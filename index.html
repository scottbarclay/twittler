<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="styles.css">
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <div id="container">
        <div id="leftsidebar">
        <div id="activeuser">
          <div id="me">me</div>
          <div id="photo">photo</div>
          <div id="identity">
            <h3 id="identity-name">username</h3>
            <p id="identity-handle">@handle</p>
          </div>
        </div>
        <div id="trending">trends for you</div>
      </div>
      <div id="timeline">
      </div>
      <div id="rightsidebar">
        <div id="followrecs">who to follow</div>
      </div>
      <div id="header">
        <img id="twit" src="graphics/twit-sm.png">
      </div>
    </div>


    <script>
      var loadTweets = function(user) {
        var $body = $('body');
        $('#timeline').children().remove();
        $('#timeline').append('<button type="button" id="refresh">See new Twittles<\/button>')
        var stream;
        user === undefined ? stream = streams.home : stream = streams.users[user];
        var index = stream.length - 1;
        while(index >= 0) {
          var tweet = stream[index];
          var $tweet = $('<div class="tweet"><p><span class="username"><a href="#">' + 
            tweet.user + '<\/a><\/span><span class="handle"> @' + tweet.user + '<\/span>' +
            '<span class="timestamp">' + ' \xB7 ' + tweet.created_at + '<\/span><\/br><span>' + 
            tweet.message + '<\/span><\/p><\/div>');
          $tweet.appendTo(($body).find('#timeline'));
          index -= 1;
        }
      };
 
      $('#twit').on('click', function() {
        loadTweets();
      });

      $(document).on('click', '.username', function() {
        var user = $(this).text();
        //alert(user);
        loadTweets(user);
      });

      $(document).ready(function() {
        var $body = $('body');
        loadTweets();
      });

    </script>
  </body>
</html>
